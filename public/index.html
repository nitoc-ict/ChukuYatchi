<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel="apple-touch-icon" href="logo192.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <script type="text/javascript" src='https://cdn.rawgit.com/phi-jp/phina.js/v0.2.0/build/phina.js'></script>
    <title>ChukuYatchi</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>

    <script>
      phina.globalize();
      const HEIGHT = window.innerHeight * 1.77;  // 画面の縦幅
      const WIDTH = window.innerWidth * 1.77;   // 画面の横幅
var ASSETS = {
  image: {
    // 背景
    'backgroundImage': 'https://drive.google.com/uc?id=1aP7owI_TQy23j1BVGhtKOrQCwOQ8Z6Dk',
    // メニューアイコン
    'iconMitsukeru': 'https://drive.google.com/uc?id=1c1FyBvCqQSAj6ag1NeP6DELeJoLWdyJl',
    'iconOshigoto': 'https://drive.google.com/uc?id=1HqUEa06w89dhDEmX4jhGy4rJuV8A8r5k',
    'iconBokin': 'https://drive.google.com/uc?id=1JKyjQRFaJGUq92kmw8DIo_OHk8mNdQbu',
    // ちゅくやっち
    'chukuYatchBaby': 'https://drive.google.com/uc?id=1FGw5Q7ISopjn6KcGOtkSY29e69OMb866',
  },
  sound: {
    'bgm': './20181116umusan.mp3',
  },
};
phina.define('MainScene', {
  superClass: 'CanvasScene',
  
  init: function() {
    this.superInit({
      width: WIDTH,
      height: HEIGHT,
    });
    SoundManager.playMusic('bgm');
    // 画像
    this.backgroundImage = Sprite('backgroundImage', WIDTH, HEIGHT).addChildTo(this);
    this.iconOshigoto = Sprite('iconOshigoto').addChildTo(this);
    this.iconMitsukeru = Sprite('iconMitsukeru').addChildTo(this);
    this.iconBokin = Sprite('iconBokin').addChildTo(this);
    this.chukuYatchiBaby = Sprite('chukuYatchBaby', 200, 200).addChildTo(this);
    
    // 画像の配置
    // 背景
    this.backgroundImage.x = this.gridX.center();
    this.backgroundImage.y = this.gridY.center();
    // ちゅくやっち
    this.chukuYatchiBaby.x = this.gridX.center();
    this.chukuYatchiBaby.y = this.gridY.span(10);
    // みつけるアイコン
    this.iconMitsukeru.x = this.gridX.span(3);
    this.iconMitsukeru.y = this.gridY.span(15);
    // おしごとアイコン
    this.iconOshigoto.x = this.gridX.center();
    this.iconOshigoto.y = this.gridY.span(15);
    // 募金アイコン
    this.iconBokin.x = this.gridX.span(13)
    this.iconBokin.y = this.gridY.span(15);

    // タッチを有効にする
    this.iconOshigoto.setInteractive(true);
    this.chukuYatchiBaby.tweener.to({
      x: this.gridX.span(13),
    },3000,"default")
    .to({
      x: this.gridX.span(4),
    },3000,"default")
    .setLoop(true);
    // おしごとアイコンをタップしたときの処理
    var own = this;
    this.iconOshigoto.onpointstart = function() {
      own.exit('oshigotoMenu');
    };
  },
});
// おしごとメニュー
phina.define("OshigotoMenu", {
  superClass: 'CanvasScene',
  
  init: function() {
    this.superInit({
      width: WIDTH,
      height: HEIGHT,
    });
    // 画像配置
    this.backgroundImage = Sprite('backgroundImage', WIDTH, HEIGHT).setPosition(this.gridX.center(), this.gridY.center()).addChildTo(this);
    this.iconKawaraYaki = Sprite('iconMitsukeru').setPosition(this.gridX.span(5), this.gridY.center()).addChildTo(this);
    this.iconKawaraNage = Sprite('iconBokin').setPosition(this.gridX.span(11), this.gridY.center()).addChildTo(this);
    // タッチを有効にする
    this.iconKawaraYaki.setInteractive(true);
    this.iconKawaraNage.setInteractive(true);
    var own = this;
    // 瓦焼きアイコンをタップしたときの処理
    this.iconKawaraYaki.onpointstart = function() {
      own.exit('main');
    };
    // 瓦投げアイコンをタップしたときの処理
    this.iconKawaraNage.onpointstart = function() {
      own.exit('main');
    };
  },
});
phina.main(function() {
  var app = GameApp({
    startLabel: 'main',
    scenes: [
      {
        className: 'MainScene',
        label: 'main',
        nextLabel: '',
      },
      {
        className: "OshigotoMenu",
        label: 'oshigotoMenu',
        nextLabel: '',
      },
    ],
    assets: ASSETS,
    height: HEIGHT,
    width: WIDTH,
  });
  
  app.run();
});
    </script>

  </body>
</html>
