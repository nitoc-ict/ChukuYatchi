<!DOCTYPE html>

  <title>ChukuYatchi</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <script src="http://cdn.rawgit.com/phi-jp/phina.js/v0.2.0/build/phina.js"></script>

<script>

phina.globalize();

const HEIGHT = window.innerHeight * 1.77;  // 画面の縦幅
const WIDTH = window.innerWidth * 1.77;   // 画面の横幅

var ASSETS = {
  image: {
    // 背景
    'backgroundImage': 'https://drive.google.com/uc?id=1BmVfkIdbyOUWTfu5m_DR9Frh8KfHmFi8',
    // メニューアイコン
    'iconMitsukeru': 'https://drive.google.com/uc?id=1c1FyBvCqQSAj6ag1NeP6DELeJoLWdyJl',
    'iconOshigoto': 'https://drive.google.com/uc?id=1HqUEa06w89dhDEmX4jhGy4rJuV8A8r5k',
    'iconBokin': 'https://drive.google.com/uc?id=1JKyjQRFaJGUq92kmw8DIo_OHk8mNdQbu',
    // ちゅくやっち
    'chukuYatchBaby': 'https://drive.google.com/uc?id=1FGw5Q7ISopjn6KcGOtkSY29e69OMb866',
  },
};
phina.define('MainScene', {
  superClass: 'CanvasScene',
  
  init: function() {
    this.superInit({
      width: WIDTH,
      height: HEIGHT,
    });

    // 画像
    this.backgroundImage = Sprite('backgroundImage', WIDTH, HEIGHT).addChildTo(this);
    this.iconOshigoto = Sprite('iconOshigoto').addChildTo(this);
    this.iconMitsukeru = Sprite('iconMitsukeru').addChildTo(this);
    this.iconBokin = Sprite('iconBokin').addChildTo(this);
    this.chukuYatchiBaby = Sprite('chukuYatchBaby', 200, 200).addChildTo(this);
    
    // 画像の配置
    // 背景
    this.backgroundImage.x = this.gridX.center();
    this.backgroundImage.y = this.gridY.center();
    // ちゅくやっち
    this.chukuYatchiBaby.x = this.gridX.center();
    this.chukuYatchiBaby.y = this.gridY.span(10);
    // みつけるアイコン
    this.iconMitsukeru.x = this.gridX.span(3);
    this.iconMitsukeru.y = this.gridY.span(15);
    // おしごとアイコン
    this.iconOshigoto.x = this.gridX.center();
    this.iconOshigoto.y = this.gridY.span(15);
    // 募金アイコン
    this.iconBokin.x = this.gridX.span(13)
    this.iconBokin.y = this.gridY.span(15);

    // タッチを有効にする
    this.iconOshigoto.setInteractive(true);

    this.chukuYatchiBaby.tweener.to({
      x: this.gridX.span(13),
    },3000,"default")
    .to({
      x: this.gridX.span(4),
    },3000,"default")
    .setLoop(true);

    // おしごとアイコンをタップしたときの処理
    var own = this;
    this.iconOshigoto.onpointstart = function() {
      own.exit('oshigotoMenu');
    };
  },
});

// おしごとメニュー
phina.define("OshigotoMenu", {
  superClass: 'CanvasScene',
  
  init: function() {
    this.superInit({
      width: WIDTH,
      height: HEIGHT,
    });

    this.backgroundImage = Sprite('backgroundImage', WIDTH, HEIGHT).addChildTo(this);
    this.backgroundImage.x = this.gridX.center();
    this.backgroundImage.y = this.gridY.center();

    // ラベル
    Label({
      text: 'Oshigoto',
      fontSize: 48,
      fill: 'white',
    }).addChildTo(this).setPosition(this.gridX.center(), this.gridY.center());

    var own = this;
    this.onpointstart = function() {
      own.exit('main');
    };
  },
});

phina.main(function() {
  var app = GameApp({
    startLabel: 'main',
    scenes: [
      {
        className: 'MainScene',
        label: 'main',
        nextLabel: '',
      },
      {
        className: "OshigotoMenu",
        label: 'oshigotoMenu',
        nextLabel: '',
      },
    ],
    assets: ASSETS,
    height: HEIGHT,
    width: WIDTH,
  });
  
  app.run();
});
</script>
